DTS:  The NOAO Data Transport SystemMichael J. Fitzpatrick*           National Optical Astronomy Observatory, 950 N Cherry Ave, Tucson, AZ 85719ABSTRACT  The Data Transport System (DTS) provides automated, reliable, high-throughput data transfer between the telescopes, archives and pipeline processing systems used by the NOAO centers in the Northern and Southern hemispheres.  DTS is implemented using an XML-RPC architecture to eliminate the need for persistent network connections between the sites, allowing each site to provide or consume services within the network only as needed. This architecture also permits remote control and monitoring of each site, and for language-independent client applications (e.g. a web interface to display transfer status or a compiled task to queue data for transport which is more tightly coupled with the acquisition system being used).  The resulting system is a highly multi-threaded distributed application able to span a wide range of network environments and uses.Keywords: Data transport, observatory operations, software architecture, middleware1. INTRODUCTION The DTS project was initiated specifically to meet the data transport needs of the Dark Energy Survey (DES) scheduled to begin science operations at Cerro Tololo Inter-American Observatory (CTIO) Blanco 4m telescope in 2011.  The Dark Energy Camera (DECam) used by the survey is a 500 Megapixel mosaic of 62 CCDs, producing roughly 500-600 MB per exposure (compressed). The DES observing cadence is expected to generate some 200-300 GB/night that must be moved to the DES pipeline facility at the National Center for Supercomputing Applications (NCSA) within 18 hrs.  When not being used for the Dark Energy Survey, the instrument will be available for community use on the Blanco 4m where the observing adence and data rates will vary by program.  All raw data will be archived at NOAO/Tucson archive facility, however the data paths will differ depending on whether a particular image is considered part of the DES.Meeting the requirements of DES is challenging because of the limited bandwidth currently available out of Chile and the need to route data differently depending on whether it was acquired as part of the DES by a generic observer.  Although the bandwidth and connectivity to Chile are expected to improve by the time the survey begins, traditional transport methods (rsync, SRB, etc) don't have sufficient throughput to meet the timing requirements, or the infrastructure needed to manage the complexity of the operational environment.  Additionally, we plan to migrate all NOAO data transport to DTS in the future, meaning the solution has to be configurable for a wide variety of data sizes and observing modes (i.e. the optimal transfer method for a single 500MB image may not be ideal for smaller files such as spectra). Figure 1.  Illustration of the various data paths that must be supported by the DTS.  As data make there way through the system, different actions are required at each stop (e.g. archive ingest, pipeline delivery etc) before moving on to the next queue.  The DTS uses external processes to manage these "delivery" actions rather than implicit knowledge of what is required at each location.*fitz@noao.edu; phone 1 520 318-8387; fax 1 520 318-8460
 2. ARCHITECTURE2.1 Design CriteriaCenter   2.2 Use of XML-RPCThe  2.3 Bulk Data TransportSection 2.4 ConfigurabilitySubsection 3. SYSTEM COMPONENTSThis document template and more information is available on SPIE.org: http://spie.org/x14101.xml or by emailing  author_help@spie.org 3.1 System LibrariesTo 3.2 ApplicationsToDTSD: The DTS DaemonDTSQ: The Data Queuing AgentDTSH: An Interactive ShellDTSMON: The DTS Monitoring Application3.3 Notes on SPIE stylesThe4. BULK DATA TRANSPORT4.1 Transport MethodsThe4.2 Transport ModesThe4.3 Data RoutingThe5. TRANSPORT QUEUE MANAGEMENT5.1 Queue TypeThe5.2 Operating ModesThe6. BOUNDARY INTERFACE APPLICATIONS6.1 IngestThe6.2 DeliveryThe6.3 Parameter MechanismThe6.4 File Naming ConventionsThe7. PERFORMANCE8. POSSIBLE ALTERNATE DTS USES9. FUTURE WORKACKNOWLEDGEMENTSREFERENCES[1] Booth, N. and Smith, A. S., [Infrared Detectors], Goodwin House Publishers, New York & Boston, 241-248 (1997).[2] Davis, A., R., Bush, C., Harvey, J. C. and Foley, M. F., "Fresnel lenses in rear projection displays," SID Int. Symp. Digest Tech. Papers 32(1), 934-937 (2001).Ê[3] Van Derlofske, J. F., "Computer modeling of LED light pipe systems for uniform display illumination," Proc. SPIE 4445, 119-129 (2001).[4] C. Jones, Director, Miscellaneous Optics Corporation, interview, Sept. 23, 2008. [5] www.optics4yurresearch.com/7752.html REFERENCE LINKINGSPIE is able to display the references section of your paper in the SPIE Digital Library, complete with links to referenced journal articles, proceedings papers, and books, when available. This added feature will bring more readers to your paper and improve the usefulness of the SPIE Digital Library for all researchers.Denote reference citations within the text of your paper by means of a superscript number. List references at the end of the paper in numerical order, and enclose the reference number in square brackets. Include the following information (as applicable). If you use this formatting, your references will link your manuscript to other research papers that are in the CrossRef system. Exact punctuation is required for the automated linking to be successful. book:	[1] Booth, N. and Smith, A. S., [Infrared Detectors], Goodwin House Publishers, New York & Boston, 241-248 (1997). journal paper:Ê 	[2] Davis, A., R., Bush, C., Harvey, J. C. and Foley, M. F. , "Fresnel lenses in rear projection displays," SID Int. Symp. Digest Tech. Papers 32(1), 934-937 (2001).Êproceedings paper:   	[3] Van Derlofske, J. F., "Computer modeling of LED light pipe systems for uniform display illumination," Proc. SPIE 4445, 119-129 (2001). 